---
# yaml-language-server: $schema=https://json.schemastore.org/kustomization
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: ai-system

resources:
  - helmrelease.yaml
  - ocirepository.yaml
  - httproute.yaml
  - backendtrafficpolicy.yaml
  - securitypolicy.yaml
  - modelconfig.yaml
  - agent-flux-troubleshooter.yaml
  - agent-odoo-assistant.yaml
  - agent-sendgrid-assistant.yaml
  - secret-kagent-values.enc.age.yaml
  # PostgreSQL MCP server for Odoo database read-only access
  - postgres-mcp-deployment.yaml
  - postgres-mcp-service.yaml
  - postgres-mcp-remotemcpserver.yaml
  - secret-postgres-mcp.enc.age.yaml
  # Odoo XML-RPC MCP server
  - odoo-mcp-deployment.yaml
  - odoo-mcp-service.yaml
  - odoo-mcp-remotemcpserver.yaml
  - secret-odoo-mcp.enc.age.yaml
  # SendGrid MCP server for email delivery diagnostics
  - sendgrid-mcp-configmap.yaml
  - sendgrid-mcp-deployment.yaml
  - sendgrid-mcp-service.yaml
  - sendgrid-mcp-remotemcpserver.yaml
  - externalsecret-sendgrid.yaml
  # Network isolation for MCP servers
  - networkpolicy.yaml

configMapGenerator:
  - name: kagent-values
    files:
      - values.yaml=./values.yaml

configurations:
  - kustomizeconfig.yaml
